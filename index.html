<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learning Progress Tracker</title>
    <!-- Assurer que le mode clair s'applique correctement sur mobile -->
    <meta name="color-scheme" content="light dark" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: light)"
      content="#f8fafc"
    />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="#1e293b"
    />
    <!-- Style d'urgence pour les cartes en mode clair sur mobile -->
    <style>
      @media (max-width: 768px) {
        /* Cartes en mode clair */
        html[data-theme="light"] .card,
        html[data-theme="light"] [class*="Card"],
        html[data-theme="light"] [class*="-card"],
        html[data-theme="light"] [class*="card"],
        html[data-theme="light"] .dark\:bg-gray-800,
        html[data-theme="light"] .mastered-card,
        html[data-theme="light"] [class*="learning-item-card"] {
          background-color: #ffffff !important;
          background: #ffffff !important;
        }

        /* Préserver les couleurs des éléments importants */
        html[data-theme="light"] svg,
        html[data-theme="light"] .preserve-color,
        html[data-theme="light"] [class*="lucide-"],
        html[data-theme="light"] [class*="bg-blue-"],
        html[data-theme="light"] [class*="bg-green-"],
        html[data-theme="light"] [class*="bg-red-"],
        html[data-theme="light"] [class*="bg-yellow-"] {
          color: currentColor !important;
        }

        /* Assurer que le mode sombre reste intact */
        html[data-theme="dark"] .card,
        html[data-theme="dark"] [class*="Card"],
        html[data-theme="dark"] [class*="-card"],
        html[data-theme="dark"] [class*="card"] {
          background-color: #1e293b !important;
        }

        /* Texte blanc pour les boutons colorés */
        html[data-theme="light"] .bg-blue-500,
        html[data-theme="light"] .bg-green-500,
        html[data-theme="light"] .bg-red-500 {
          color: #ffffff !important;
        }
      }
    </style>
    <!-- Ajout du fix pour les compteurs d'activité immédiatement -->
    <style id="critical-counter-fix">
      /* Fix critique pour les compteurs d'activité en haut à droite */
      html[data-theme="dark"] span.text-xs.font-medium.bg-blue-500\/10,
      html[data-theme="dark"] span.text-xs.font-medium.bg-green-500\/10 {
        color: white !important;
        background-color: #0f172a !important;
        border: 2px solid !important;
        border-radius: 9999px !important;
        padding: 4px 8px !important;
        min-width: 24px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-weight: 700 !important;
      }

      html[data-theme="dark"] span.text-xs.font-medium.bg-blue-500\/10 {
        background-color: rgb(37, 99, 235) !important;
        border-color: #60a5fa !important;
      }

      html[data-theme="dark"] span.text-xs.font-medium.bg-green-500\/10 {
        background-color: rgb(22, 163, 74) !important;
        border-color: #4ade80 !important;
      }
    </style>
    <!-- Style pour forcer l'égalisation des hauteurs sur le dashboard -->
    <style id="dashboard-layout-fix">
      @media (min-width: 768px) {
        /* Ajuster la hauteur des widgets sur le tableau de bord */
        .dashboard-widgets-container > div,
        .dashboard-top-row > div,
        .grid.grid-cols-1.md\:grid-cols-2.lg\:grid-cols-3.gap-4 > div,
        [class*="dashboard"] [class*="grid"] > div,
        div.md\:grid-cols-2 > div,
        div.lg\:grid-cols-3 > div {
          height: 100% !important;
          min-height: 380px !important;
          display: flex !important;
          flex-direction: column !important;
        }

        /* Widgets spécifiques */
        .active-tasks-widget,
        [class*="active-tasks"],
        div:has(> h2:contains("Active")),
        div:has(> h3:contains("Active")),
        .calendar-widget,
        [class*="calendar"],
        div:has(.rdp) {
          height: 100% !important;
          min-height: 380px !important;
          display: flex !important;
          flex-direction: column !important;
        }

        /* Cartes dans les widgets */
        .dashboard-widgets-container .card,
        .dashboard-top-row .card,
        [class*="dashboard"] [class*="grid"] .card {
          height: 100% !important;
          display: flex !important;
          flex-direction: column !important;
        }

        /* Zone de contenu des cartes */
        .dashboard-widgets-container .card > div:not(:first-child),
        .dashboard-top-row .card > div:not(:first-child),
        [class*="dashboard"] [class*="grid"] .card > div:not(:first-child) {
          flex: 1 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        /* Listes de tâches avec défilement */
        .active-tasks-widget [class*="grid"],
        [class*="active-tasks"] [class*="grid"],
        div:has(> h2:contains("Active")) [class*="grid"],
        div:has(> h3:contains("Active")) [class*="grid"] {
          flex: 1 !important;
          overflow-y: auto !important;
          padding-right: 2px !important;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- Script pour corriger les problèmes de mode clair sur mobile -->
    <script src="/light-mode-fixer.js"></script>
    <!-- Ajout du script de correction des compteurs -->
    <script src="/counter-fix.js"></script>
  </body>
</html>
