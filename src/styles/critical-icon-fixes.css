/**
 * CORRECTIFS CRITIQUES POUR LES FONDS ET TEXTES EN MODE SOMBRE
 * Ce fichier contient des correctifs à très haute priorité pour résoudre 
 * les problèmes de fond blanc et de texte en mode sombre.
 */

/* CORRECTIFS POUR LES SECTIONS DE TEMPS TOTAL ET STATISTIQUES */
html[data-theme="dark"] body .learning-item-card .mb-4.p-4.bg-gray-50,
html[data-theme="dark"] body .learning-item-card .mb-4.p-4.bg-gray-100,
html[data-theme="dark"] body .learning-item-card .mb-4.p-4.bg-white,
html[data-theme="dark"] body .learning-item-card div.p-4.bg-gray-50,
html[data-theme="dark"] body .learning-item-card div.p-4.bg-gray-100,
html[data-theme="dark"] body .learning-item-card div.p-4.bg-white,
html[data-theme="dark"] body .item-wrapper .mb-4.p-4.bg-gray-50,
html[data-theme="dark"] body .item-wrapper .mb-4.p-4.bg-gray-100,
html[data-theme="dark"] body .item-wrapper .mb-4.p-4.bg-white,
html[data-theme="dark"] body .item-wrapper div.p-4.bg-gray-50,
html[data-theme="dark"] body .item-wrapper div.p-4.bg-gray-100,
html[data-theme="dark"] body .item-wrapper div.p-4.bg-white,
html[data-theme="dark"] body div[class*="total-time"],
html[data-theme="dark"] body div[class*="total-minutes"],
html[data-theme="dark"] body div[class*="bg-white"],
html[data-theme="dark"] body div[class*="bg-gray-50"],
html[data-theme="dark"] body div[class*="bg-gray-100"] {
  background-color: #0f172a !important;
  background: #0f172a !important;
  color: #f8fafc !important;
  border-color: #334155 !important;
  border-radius: 0.5rem !important;
}

/* TEXTES À L'INTÉRIEUR DES SECTIONS DE TEMPS */
html[data-theme="dark"] body .learning-item-card .mb-4.p-4.bg-gray-50 *,
html[data-theme="dark"] body .learning-item-card .mb-4.p-4.bg-gray-100 *,
html[data-theme="dark"] body .learning-item-card .mb-4.p-4.bg-white *,
html[data-theme="dark"] body .learning-item-card div.p-4.bg-gray-50 *,
html[data-theme="dark"] body .learning-item-card div.p-4.bg-gray-100 *,
html[data-theme="dark"] body .learning-item-card div.p-4.bg-white *,
html[data-theme="dark"] body .item-wrapper .mb-4.p-4.bg-gray-50 *,
html[data-theme="dark"] body .item-wrapper .mb-4.p-4.bg-gray-100 *,
html[data-theme="dark"] body .item-wrapper .mb-4.p-4.bg-white *,
html[data-theme="dark"] body .item-wrapper div.p-4.bg-gray-50 *,
html[data-theme="dark"] body .item-wrapper div.p-4.bg-gray-100 *,
html[data-theme="dark"] body .item-wrapper div.p-4.bg-white *,
html[data-theme="dark"] body div[class*="total-time"] *,
html[data-theme="dark"] body div[class*="total-minutes"] *,
html[data-theme="dark"] body .time-display *,
html[data-theme="dark"] body .stats-display * {
  color: #f1f5f9 !important;
}

/* ARRIÈRE-PLANS BLANCS DANS LES CARTES */
html[data-theme="dark"] body .learning-item-card .bg-white,
html[data-theme="dark"] body .learning-item-card div.bg-white,
html[data-theme="dark"] body .learning-item-card [class*="bg-white"],
html[data-theme="dark"] body .item-wrapper .bg-white,
html[data-theme="dark"] body .item-wrapper div.bg-white,
html[data-theme="dark"] body .item-wrapper [class*="bg-white"],
html[data-theme="dark"] body .card .bg-white,
html[data-theme="dark"] body .card div.bg-white,
html[data-theme="dark"] body .card [class*="bg-white"] {
  background-color: #1e293b !important;
  background: #1e293b !important;
  color: #f8fafc !important;
}

/* CONTRASTE AMÉLIORÉ POUR LE TEXTE EN MODE SOMBRE */
html[data-theme="dark"] body .text-gray-500,
html[data-theme="dark"] body .text-gray-600,
html[data-theme="dark"] body .text-gray-700,
html[data-theme="dark"] body .text-gray-800,
html[data-theme="dark"] body .text-gray-900 {
  color: #f1f5f9 !important;
}

/* ÉLÉMENTS DE FORMULAIRE DANS LES SECTIONS DE TEMPS */
html[data-theme="dark"] body input[type="number"],
html[data-theme="dark"] body input[type="text"],
html[data-theme="dark"] body input[type="time"],
html[data-theme="dark"] body .time-input,
html[data-theme="dark"] body [class*="input"] {
  background-color: #334155 !important;
  color: #f8fafc !important;
  border-color: #475569 !important;
}

/* SÉLECTEURS POUR DES COMPOSANTS SPÉCIFIQUES */
html[data-theme="dark"] body .total-time-display,
html[data-theme="dark"] body .total-minutes-display,
html[data-theme="dark"] body .time-counter,
html[data-theme="dark"] body .time-tracker,
html[data-theme="dark"] body .time-display,
html[data-theme="dark"] body .stats-display,
html[data-theme="dark"] body .time-section,
html[data-theme="dark"] body .timer-section,
html[data-theme="dark"] body [class*="timer-"],
html[data-theme="dark"] body [class*="time-"],
html[data-theme="dark"] body [class*="counter-"] {
  background-color: #1e293b !important;
  color: #f8fafc !important;
  border-color: #334155 !important;
}

/* CORRECTIF INLINE POUR LES AFFICHAGES AVEC STYLE INLINE */
html[data-theme="dark"] body [style*="background-color: white"],
html[data-theme="dark"] body [style*="background-color: #fff"],
html[data-theme="dark"] body [style*="background-color: #ffffff"],
html[data-theme="dark"] body [style*="background: white"],
html[data-theme="dark"] body [style*="background: #fff"],
html[data-theme="dark"] body [style*="background: #ffffff"] {
  background-color: #1e293b !important;
  background: #1e293b !important;
  color: #f8fafc !important;
}

/* CORRECTIF POUR LES CLASSES DYNAMIQUES / GÉNÉRÉES */
html[data-theme="dark"] body *[class^="bg-white"],
html[data-theme="dark"] body *[class*=" bg-white"],
html[data-theme="dark"] body *[class^="bg-gray-50"],
html[data-theme="dark"] body *[class*=" bg-gray-50"],
html[data-theme="dark"] body *[class^="bg-gray-100"],
html[data-theme="dark"] body *[class*=" bg-gray-100"] {
  background-color: #1e293b !important;
  background: #1e293b !important;
  color: #f8fafc !important;
}

/* CORRECTION DE CONTRASTE POUR TOUS LES TEXTES À L'INTÉRIEUR D'UN FOND BLANC/GRIS EN MODE SOMBRE */
html[data-theme="dark"] body .bg-white *,
html[data-theme="dark"] body .bg-gray-50 *,
html[data-theme="dark"] body .bg-gray-100 *,
html[data-theme="dark"] body [class*="bg-white"] *,
html[data-theme="dark"] body [class*="bg-gray-50"] *,
html[data-theme="dark"] body [class*="bg-gray-100"] * {
  color: #f8fafc !important;
}

/* CORRECTION SPÉCIFIQUE POUR LES SECTIONS DE STATISTIQUES AVEC DES BORDS ARRONDIS */
html[data-theme="dark"] body .rounded-lg.p-4.bg-white,
html[data-theme="dark"] body .rounded-lg.p-4.bg-gray-50,
html[data-theme="dark"] body .rounded-lg.p-4.bg-gray-100,
html[data-theme="dark"] body .rounded-xl.p-4.bg-white,
html[data-theme="dark"] body .rounded-xl.p-4.bg-gray-50,
html[data-theme="dark"] body .rounded-xl.p-4.bg-gray-100 {
  background-color: #0f172a !important;
  background: #0f172a !important;
  border: 1px solid #334155 !important;
}

/* CORRECTIFS SPÉCIFIQUES POUR LES ICÔNES EN MODE SOMBRE */
/* Ces règles ont une priorité très élevée pour surcharger tous les autres styles */
html[data-theme="dark"] svg,
.dark svg,
html[data-theme="dark"] [class*="lucide-"],
.dark [class*="lucide-"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  vector-effect: non-scaling-stroke !important;
}

/* CIBLAGE INDIVIDUEL DES ICÔNES LUCIDE LES PLUS COURANTES */
html[data-theme="dark"] .lucide-edit,
.dark .lucide-edit,
html[data-theme="dark"] .lucide-save,
.dark .lucide-save,
html[data-theme="dark"] .lucide-trash-2,
.dark .lucide-trash-2,
html[data-theme="dark"] .lucide-clock,
.dark .lucide-clock,
html[data-theme="dark"] .lucide-check,
.dark .lucide-check,
html[data-theme="dark"] .lucide-x,
.dark .lucide-x,
html[data-theme="dark"] .lucide-plus,
.dark .lucide-plus,
html[data-theme="dark"] .lucide-external-link,
.dark .lucide-external-link,
html[data-theme="dark"] .lucide-check-circle-2,
.dark .lucide-check-circle-2,
html[data-theme="dark"] .lucide-copy,
.dark .lucide-copy {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
}

/* CAS SPÉCIAL POUR LES ICÔNES DE LECTURE/PAUSE/ARRÊT */
html[data-theme="dark"] .lucide-play,
.dark .lucide-play {
  fill: currentColor !important;
  stroke: currentColor !important;
}

html[data-theme="dark"] .lucide-pause,
.dark .lucide-pause,
html[data-theme="dark"] .lucide-stop-circle,
.dark .lucide-stop-circle {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
}

/* CORRECTION POUR LES ICÔNES DANS LES BADGES ET BOUTONS */
html[data-theme="dark"] button svg,
.dark button svg,
html[data-theme="dark"] .badge svg,
.dark .badge svg,
html[data-theme="dark"] [role="button"] svg,
.dark [role="button"] svg {
  fill: none !important;
  stroke: currentColor !important;
}

/* FORCAGE DES ATTRIBUTS SVG DIRECTEMENT */
html[data-theme="dark"] svg *,
.dark svg * {
  fill: inherit !important;
  stroke: inherit !important;
  stroke-width: inherit !important;
}

/* ADAPTATION POUR LE MODE MOBILE */
@media (max-width: 768px) {
  html[data-theme="dark"] svg,
  .dark svg,
  html[data-theme="dark"] [class*="lucide-"],
  .dark [class*="lucide-"] {
    stroke-width: 2.5px !important; /* Légèrement plus épais pour meilleure visibilité sur mobile */
  }
}

/* CORRECTION CRITIQUE POUR LES BOUTONS AVEC ICÔNES */
html[data-theme="dark"] button.text-red-600 svg, 
.dark button.text-red-600 svg,
html[data-theme="dark"] button.text-red-500 svg, 
.dark button.text-red-500 svg {
  stroke: #ef4444 !important;
  fill: none !important;
}

html[data-theme="dark"] button.text-green-600 svg, 
.dark button.text-green-600 svg,
html[data-theme="dark"] button.text-green-500 svg, 
.dark button.text-green-500 svg {
  stroke: #22c55e !important;
  fill: none !important;
}

html[data-theme="dark"] button.text-blue-600 svg, 
.dark button.text-blue-600 svg,
html[data-theme="dark"] button.text-blue-500 svg, 
.dark button.text-blue-500 svg {
  stroke: #3b82f6 !important;
  fill: none !important;
}

html[data-theme="dark"] button.text-yellow-600 svg, 
.dark button.text-yellow-600 svg,
html[data-theme="dark"] button.text-yellow-500 svg, 
.dark button.text-yellow-500 svg {
  stroke: #f59e0b !important;
  fill: none !important;
}

/* CORRECTIFS POUR LES SVG DANS LES LEARNING CARDS */
html[data-theme="dark"] .learning-item-card svg,
.dark .learning-item-card svg,
html[data-theme="dark"] [class*="learning-card"] svg,
.dark [class*="learning-card"] svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2px !important;
}

/* CORRECTIFS SPÉCIFIQUES POUR LES BOUTONS DANS LES LEARNING CARDS */
html[data-theme="dark"] .learning-item-card button svg,
.dark .learning-item-card button svg,
html[data-theme="dark"] [class*="learning-card"] button svg,
.dark [class*="learning-card"] button svg {
  fill: none !important;
  stroke: currentColor !important;
}
