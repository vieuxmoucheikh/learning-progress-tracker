/**
 * CORRECTIFS ULTRA-SPÉCIFIQUES POUR LES CARTES D'APPRENTISSAGE EN MODE SOMBRE
 * Ce fichier applique des correctifs ciblés uniquement pour les cartes d'apprentissage
 * et leurs composants internes qui posent problème en mode sombre.
 */

/* CORRECTIFS POUR LES SECTIONS DE CARTES - NIVEAUX CRITIQUES */
html[data-theme="dark"] .learning-item-card,
html[data-theme="dark"] .item-wrapper,
html[data-theme="dark"] [class*="learning-item"] {
  /* Garantir que le container principal a un fond sombre */
  background-color: transparent !important;
}

/* CIBLAGE DE SECTIONS SPÉCIFIQUES AVEC FOND BLANC */
html[data-theme="dark"] .learning-item-card .p-4.bg-white,
html[data-theme="dark"] .learning-item-card .p-4.bg-gray-50,
html[data-theme="dark"] .learning-item-card .p-4.bg-gray-100,
html[data-theme="dark"] .learning-item-card div[class*="bg-white"],
html[data-theme="dark"] .learning-item-card div[class*="bg-gray-50"],
html[data-theme="dark"] .learning-item-card div[class*="bg-gray-100"],
html[data-theme="dark"] .item-wrapper .p-4.bg-white,
html[data-theme="dark"] .item-wrapper .p-4.bg-gray-50,
html[data-theme="dark"] .item-wrapper .p-4.bg-gray-100,
html[data-theme="dark"] .item-wrapper div[class*="bg-white"],
html[data-theme="dark"] .item-wrapper div[class*="bg-gray-50"],
html[data-theme="dark"] .item-wrapper div[class*="bg-gray-100"] {
  background-color: #1e293b !important;
  background: #1e293b !important;
  color: #f8fafc !important;
  border: 1px solid #334155 !important;
  border-radius: 0.5rem !important;
}

/* AFFICHAGE DE TEMPS TOTAL ET MINUTES TOTAL */
html[data-theme="dark"] .learning-item-card [class*="total-time"],
html[data-theme="dark"] .learning-item-card [class*="total-minutes"],
html[data-theme="dark"] .learning-item-card [class*="time-counter"],
html[data-theme="dark"] .learning-item-card [class*="time-display"],
html[data-theme="dark"] .learning-item-card [class*="time-tracker"],
html[data-theme="dark"] .learning-item-card div.time-display,
html[data-theme="dark"] .learning-item-card div.stats-display,
html[data-theme="dark"] .item-wrapper [class*="total-time"],
html[data-theme="dark"] .item-wrapper [class*="total-minutes"],
html[data-theme="dark"] .item-wrapper [class*="time-counter"],
html[data-theme="dark"] .item-wrapper [class*="time-display"],
html[data-theme="dark"] .item-wrapper [class*="time-tracker"],
html[data-theme="dark"] .item-wrapper div.time-display,
html[data-theme="dark"] .item-wrapper div.stats-display {
  background-color: #0f172a !important;
  background: #0f172a !important;
  color: #f8fafc !important;
  border-color: #334155 !important;
  border-radius: 0.5rem !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.1) !important;
}

/* STYLES POUR LES TEXTES À L'INTÉRIEUR DES SECTIONS */
html[data-theme="dark"] .learning-item-card .p-4.bg-white *:not(svg):not(path),
html[data-theme="dark"] .learning-item-card .p-4.bg-gray-50 *:not(svg):not(path),
html[data-theme="dark"] .learning-item-card .p-4.bg-gray-100 *:not(svg):not(path),
html[data-theme="dark"] .learning-item-card [class*="total-time"] *:not(svg):not(path),
html[data-theme="dark"] .learning-item-card [class*="total-minutes"] *:not(svg):not(path),
html[data-theme="dark"] .learning-item-card div.time-display *:not(svg):not(path),
html[data-theme="dark"] .learning-item-card div.stats-display *:not(svg):not(path),
html[data-theme="dark"] .item-wrapper .p-4.bg-white *:not(svg):not(path),
html[data-theme="dark"] .item-wrapper .p-4.bg-gray-50 *:not(svg):not(path),
html[data-theme="dark"] .item-wrapper .p-4.bg-gray-100 *:not(svg):not(path),
html[data-theme="dark"] .item-wrapper [class*="total-time"] *:not(svg):not(path),
html[data-theme="dark"] .item-wrapper [class*="total-minutes"] *:not(svg):not(path),
html[data-theme="dark"] .item-wrapper div.time-display *:not(svg):not(path),
html[data-theme="dark"] .item-wrapper div.stats-display *:not(svg):not(path) {
  color: #f1f5f9 !important;
}

/* CORRECTIFS ULTRA-SPÉCIFIQUES POUR LES ICÔNES DANS LES CARTES */
html[data-theme="dark"] .learning-item-card svg,
html[data-theme="dark"] .learning-item-card button svg,
html[data-theme="dark"] .learning-item-card [role="button"] svg,
html[data-theme="dark"] .item-wrapper svg,
html[data-theme="dark"] .item-wrapper button svg,
html[data-theme="dark"] .item-wrapper [role="button"] svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.5)) !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* ICÔNES SPÉCIFIQUES DANS LES CARTES */
html[data-theme="dark"] .learning-item-card svg[data-lucide="Edit"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Edit"] {
  stroke: #60a5fa !important;
  color: #60a5fa !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Save"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Save"] {
  stroke: #60a5fa !important;
  color: #60a5fa !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Trash2"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Trash2"] {
  stroke: #f87171 !important;
  color: #f87171 !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Play"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Play"] {
  stroke: #4ade80 !important;
  color: #4ade80 !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Pause"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Pause"] {
  stroke: #facc15 !important;
  color: #facc15 !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Clock"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Clock"] {
  stroke: #94a3b8 !important;
  color: #94a3b8 !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Check"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Check"] {
  stroke: #4ade80 !important;
  color: #4ade80 !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="X"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="X"] {
  stroke: #f87171 !important;
  color: #f87171 !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Eye"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="EyeOff"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Eye"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="EyeOff"] {
  stroke: #60a5fa !important;
  color: #60a5fa !important;
}

html[data-theme="dark"] .learning-item-card svg[data-lucide="Trophy"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Trophy"] {
  stroke: #fbbf24 !important;
  color: #fbbf24 !important;
}

/* CORRECTION POUR L'ICÔNE TROPHY AVEC REMPLISSAGE */
html[data-theme="dark"] .learning-item-card svg[data-lucide="Trophy"] path[fill="currentColor"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Trophy"] path[fill="currentColor"] {
  fill: #fbbf24 !important;
}

/* CORRECTION POUR LES BOUTONS AVEC DES ICÔNES */
html[data-theme="dark"] .learning-item-card button:hover svg,
html[data-theme="dark"] .item-wrapper button:hover svg {
  filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.9)) !important;
  transform: scale(1.1) !important;
  transition: all 0.2s ease !important;
}

/* MEDIA QUERIES POUR MOBILE */
@media (max-width: 768px) {
  html[data-theme="dark"] .learning-item-card svg,
  html[data-theme="dark"] .learning-item-card button svg,
  html[data-theme="dark"] .item-wrapper svg,
  html[data-theme="dark"] .item-wrapper button svg {
    stroke-width: 3px !important;
    min-width: 20px !important;
    min-height: 20px !important;
    filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.7)) !important;
  }
}

/* ANIMATION FORCÉE POUR ASSURER LE RENDU */
@keyframes forceSvgRender {
  0% { opacity: 0.99; }
  100% { opacity: 1; }
}

html[data-theme="dark"] .learning-item-card svg,
html[data-theme="dark"] .item-wrapper svg {
  animation: forceSvgRender 0.01s forwards !important;
}
