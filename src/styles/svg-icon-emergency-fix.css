/**
 * CORRECTIF D'URGENCE ABSOLU POUR LES ICÔNES SVG EN MODE SOMBRE
 * Ce fichier applique des styles hautement spécifiques pour garantir que toutes
 * les icônes SVG en mode sombre sont bien visibles avec leurs formes et contours
 * appropriés sans être remplies.
 */

/* RESET COMPLET POUR TOUTES LES ICÔNES SVG */
html[data-theme="dark"] svg,
html[data-theme="dark"] [data-lucide], 
html[data-theme="dark"] .lucide,
html[data-theme="dark"] [class*="lucide-"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  stroke-opacity: 1 !important;
  opacity: 1 !important;
  visibility: visible !important;
  /* Effet d'ombre légère pour améliorer la visibilité */
  filter: drop-shadow(0 0 1px rgba(255, 255, 255, 0.7)) !important;
}

/* RESET POUR TOUS LES CHEMINS ET FORMES À L'INTÉRIEUR DES SVG */
html[data-theme="dark"] svg *,
html[data-theme="dark"] svg path,
html[data-theme="dark"] svg line,
html[data-theme="dark"] svg polyline,
html[data-theme="dark"] svg circle,
html[data-theme="dark"] svg rect,
html[data-theme="dark"] svg polygon {
  fill: none !important;
  stroke: inherit !important;
}

/* CIBLAGE PAR TYPE D'ICÔNE SPÉCIFIQUE */
html[data-theme="dark"] svg[data-lucide="Edit"],
html[data-theme="dark"] svg[data-lucide="Save"],
html[data-theme="dark"] svg[data-lucide="Trash2"],
html[data-theme="dark"] svg[data-lucide="Clock"],
html[data-theme="dark"] svg[data-lucide="Check"],
html[data-theme="dark"] svg[data-lucide="X"],
html[data-theme="dark"] svg[data-lucide="Play"],
html[data-theme="dark"] svg[data-lucide="Pause"],
html[data-theme="dark"] svg[data-lucide="Plus"],
html[data-theme="dark"] svg[data-lucide="Link"],
html[data-theme="dark"] svg[data-lucide="ExternalLink"],
html[data-theme="dark"] svg[data-lucide="Download"],
html[data-theme="dark"] svg[data-lucide="Eye"],
html[data-theme="dark"] svg[data-lucide="EyeOff"],
html[data-theme="dark"] svg[data-lucide="Bookmark"],
html[data-theme="dark"] svg[data-lucide="BookmarkCheck"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  /* Effet de netteté augmentée */
  shape-rendering: geometricPrecision !important;
  vector-effect: non-scaling-stroke !important;
}

/* COULEURS SPÉCIFIQUES PAR ICÔNE */
html[data-theme="dark"] svg[data-lucide="Edit"] {
  stroke: #60a5fa !important; /* blue-400 */
}

html[data-theme="dark"] svg[data-lucide="Save"] {
  stroke: #60a5fa !important; /* blue-400 */
}

html[data-theme="dark"] svg[data-lucide="Trash2"] {
  stroke: #f87171 !important; /* red-400 */
}

html[data-theme="dark"] svg[data-lucide="Check"] {
  stroke: #4ade80 !important; /* green-400 */
}

html[data-theme="dark"] svg[data-lucide="X"] {
  stroke: #f87171 !important; /* red-400 */
}

html[data-theme="dark"] svg[data-lucide="Eye"],
html[data-theme="dark"] svg[data-lucide="EyeOff"] {
  stroke: #60a5fa !important; /* blue-400 */
}

html[data-theme="dark"] svg[data-lucide="Download"] {
  stroke: #60a5fa !important; /* blue-400 */
}

html[data-theme="dark"] svg[data-lucide="Bookmark"],
html[data-theme="dark"] svg[data-lucide="BookmarkCheck"] {
  stroke: #4ade80 !important; /* green-400 */
}

/* CAS SPÉCIAL POUR L'ICÔNE TROPHY */
html[data-theme="dark"] svg[data-lucide="Trophy"] {
  stroke: #fbbf24 !important; /* yellow-400 */
  stroke-width: 2.5px !important;
}

html[data-theme="dark"] svg[data-lucide="Trophy"] path[fill="currentColor"] {
  fill: #fbbf24 !important; /* yellow-400 */
}

/* ICÔNES DANS LES BOUTONS */
html[data-theme="dark"] button svg,
html[data-theme="dark"] .btn svg,
html[data-theme="dark"] [role="button"] svg {
  fill: none !important;
  stroke-width: 2.5px !important;
  /* Effet de surbrillance au survol */
  transition: filter 0.2s ease, transform 0.2s ease !important;
}

html[data-theme="dark"] button:hover svg,
html[data-theme="dark"] .btn:hover svg,
html[data-theme="dark"] [role="button"]:hover svg {
  filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.9)) !important;
  transform: scale(1.1) !important;
}

/* CORRECTIFS SPÉCIFIQUES POUR LES COULEURS */
html[data-theme="dark"] .text-blue-500 svg,
html[data-theme="dark"] .text-blue-600 svg,
html[data-theme="dark"] [class*="text-blue-"] svg,
html[data-theme="dark"] svg.text-blue-500,
html[data-theme="dark"] svg.text-blue-600 {
  stroke: #60a5fa !important; /* blue-400 */
  fill: none !important;
}

html[data-theme="dark"] .text-green-500 svg,
html[data-theme="dark"] .text-green-600 svg,
html[data-theme="dark"] [class*="text-green-"] svg,
html[data-theme="dark"] svg.text-green-500,
html[data-theme="dark"] svg.text-green-600 {
  stroke: #4ade80 !important; /* green-400 */
  fill: none !important;
}

html[data-theme="dark"] .text-red-500 svg,
html[data-theme="dark"] .text-red-600 svg,
html[data-theme="dark"] [class*="text-red-"] svg,
html[data-theme="dark"] svg.text-red-500,
html[data-theme="dark"] svg.text-red-600 {
  stroke: #f87171 !important; /* red-400 */
  fill: none !important;
}

html[data-theme="dark"] .text-yellow-500 svg,
html[data-theme="dark"] .text-yellow-600 svg,
html[data-theme="dark"] [class*="text-yellow-"] svg,
html[data-theme="dark"] svg.text-yellow-500,
html[data-theme="dark"] svg.text-yellow-600 {
  stroke: #fbbf24 !important; /* yellow-400 */
  fill: none !important;
}

/* CORRECTION POUR LES ICÔNES DANS LES LEARNING ITEM CARDS */
html[data-theme="dark"] .learning-item-card svg,
html[data-theme="dark"] .item-wrapper svg {
  fill: none !important;
  stroke-width: 2.5px !important;
  /* Effet d'ombre amélioré pour meilleure visibilité */
  filter: drop-shadow(0 0 1px rgba(255, 255, 255, 0.7)) !important;
}

/* OPTIMISATIONS MOBILES */
@media (max-width: 768px) {
  html[data-theme="dark"] svg,
  html[data-theme="dark"] [data-lucide],
  html[data-theme="dark"] .lucide,
  html[data-theme="dark"] [class*="lucide-"] {
    stroke-width: 3px !important; /* Encore plus épais sur mobile */
    filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.7)) !important;
  }
}

/* ANIMATION POUR FORCER LE REPAINT DES ICÔNES */
@keyframes forceIconRender {
  0% { opacity: 0.99; }
  100% { opacity: 1; }
}

html[data-theme="dark"] svg,
html[data-theme="dark"] [data-lucide],
html[data-theme="dark"] .lucide {
  animation: forceIconRender 0.01s forwards !important;
}

/* AMÉLIORATION DE LA VISIBILITÉ DES ICÔNES DANS LES BADGES */
html[data-theme="dark"] .badge svg,
html[data-theme="dark"] .status-badge svg,
html[data-theme="dark"] [class*="badge-"] svg {
  stroke-width: 3px !important;
  min-width: 14px !important;
  min-height: 14px !important;
}

/* CORRECTIF HAUTE PRIORITÉ POUR LES ICÔNES DANS LES MENUS ET NAVIGATION */
html[data-theme="dark"] nav svg,
html[data-theme="dark"] .menu svg,
html[data-theme="dark"] [role="menu"] svg,
html[data-theme="dark"] [role="menuitem"] svg,
html[data-theme="dark"] [class*="menu-"] svg,
html[data-theme="dark"] [class*="nav-"] svg {
  stroke-width: 2.5px !important;
  filter: drop-shadow(0 0 1px rgba(255, 255, 255, 0.5)) !important;
}
