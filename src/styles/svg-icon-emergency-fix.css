/**
 * CORRECTIF D'URGENCE POUR LES ICÔNES SVG DANS LES LEARNING ITEM CARDS
 * Ce fichier corrige spécifiquement les problèmes d'affichage des icônes SVG
 * dans les cartes d'items d'apprentissage en mode sombre.
 */

/* RESET UNIVERSEL POUR TOUTES LES ICÔNES LUCIDE */
svg[data-lucide],
.lucide,
[class*="lucide-"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  stroke-opacity: 1 !important;
  display: inline-block !important;
  visibility: visible !important;
}

/* RESET POUR TOUS LES CHEMINS SVG */
svg[data-lucide] *,
svg[data-lucide] path,
svg[data-lucide] line,
svg[data-lucide] circle,
svg[data-lucide] rect,
svg[data-lucide] polyline,
svg[data-lucide] polygon {
  fill: none !important;
  stroke: inherit !important;
}

/* CORRECTIF SPÉCIFIQUE POUR LES LEARNING ITEM CARDS */
.learning-item-card svg[data-lucide],
.learning-item-card .lucide,
.learning-item-card [class*="lucide-"],
.item-wrapper svg[data-lucide],
.item-wrapper .lucide,
.item-wrapper [class*="lucide-"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  visibility: visible !important;
  stroke-opacity: 1 !important;
}

/* CIBLAGE ULTRA-SPÉCIFIQUE POUR LES ACTIONS COURANTES */
.learning-item-card svg[data-lucide="Edit"],
.learning-item-card svg[data-lucide="Save"],
.learning-item-card svg[data-lucide="Trash2"],
.learning-item-card svg[data-lucide="Clock"],
.learning-item-card svg[data-lucide="Check"],
.learning-item-card svg[data-lucide="X"],
.learning-item-card svg[data-lucide="Play"],
.learning-item-card svg[data-lucide="Pause"],
.learning-item-card svg[data-lucide="Link"],
.learning-item-card svg[data-lucide="ExternalLink"],
.learning-item-card svg[data-lucide="Download"],
.learning-item-card svg[data-lucide="Eye"],
.learning-item-card svg[data-lucide="EyeOff"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
}

/* TRAITEMENT SPÉCIAL POUR L'ICÔNE DE SIGNET */
.learning-item-card svg[data-lucide="Bookmark"],
.learning-item-card svg[data-lucide="BookmarkCheck"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
}

/* TRAITEMENT SPÉCIAL POUR L'ICÔNE DE TROPHÉE */
.learning-item-card svg[data-lucide="Trophy"] {
  fill: none !important;
  stroke: #facc15 !important;
  stroke-width: 2.5px !important;
}

.learning-item-card svg[data-lucide="Trophy"] path[fill="currentColor"] {
  fill: #facc15 !important;
}

/* SPÉCIFIQUE AUX BOUTONS */
.learning-item-card button svg,
.item-wrapper button svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
}

/* RÈGLES DE COULEUR */
.learning-item-card .text-red-500 svg,
.learning-item-card .text-red-600 svg,
.learning-item-card [class*="text-red-"] svg,
.learning-item-card svg.text-red-500,
.learning-item-card svg.text-red-600 {
  stroke: #ef4444 !important;
  fill: none !important;
}

.learning-item-card .text-green-500 svg,
.learning-item-card .text-green-600 svg,
.learning-item-card [class*="text-green-"] svg,
.learning-item-card svg.text-green-500,
.learning-item-card svg.text-green-600 {
  stroke: #22c55e !important;
  fill: none !important;
}

.learning-item-card .text-blue-500 svg,
.learning-item-card .text-blue-600 svg,
.learning-item-card [class*="text-blue-"] svg,
.learning-item-card svg.text-blue-500,
.learning-item-card svg.text-blue-600 {
  stroke: #3b82f6 !important;
  fill: none !important;
}

.learning-item-card .text-yellow-500 svg,
.learning-item-card .text-yellow-600 svg,
.learning-item-card [class*="text-yellow-"] svg,
.learning-item-card svg.text-yellow-500,
.learning-item-card svg.text-yellow-600 {
  stroke: #facc15 !important;
  fill: none !important;
}

/* DÉFINITION DE BOUTONS SPÉCIFIQUES */
.learning-item-card button[title="Edit card"] svg,
.learning-item-card button[title="Save changes"] svg,
.learning-item-card button[title="Delete item"] svg,
.learning-item-card button[title="Mark as complete"] svg,
.learning-item-card button[title="Mark as incomplete"] svg,
.learning-item-card button[title="Export to PDF"] svg,
.learning-item-card button[title="Hide content"] svg,
.learning-item-card button[title="Show content"] svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
}

/* ANIMATION POUR FORCER LE RENDU */
@keyframes forceIconRender {
  0% { opacity: 0.99; }
  100% { opacity: 1; }
}

.learning-item-card svg,
.item-wrapper svg {
  animation: forceIconRender 0.01s forwards !important;
}

/* FALLBACK POUR TOUT TYPE D'ICÔNE DANS LES LEARNING ITEM CARDS */
.learning-item-card svg,
.item-wrapper svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  display: inline-block !important;
  visibility: visible !important;
}

/* MODE SOMBRE - SPÉCIFICITÉ TRÈS ÉLEVÉE */
html[data-theme="dark"] .learning-item-card svg,
html[data-theme="dark"] .item-wrapper svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  filter: drop-shadow(0 0 1px rgba(255, 255, 255, 0.5)) !important;
}

/**
 * CORRECTIF D'URGENCE ABSOLU POUR LES ICÔNES SVG
 * Ce fichier applique des règles extrêmement spécifiques et prioritaires
 * pour corriger l'affichage des icônes dans les learning item cards.
 */

/* Sélecteurs ultra-spécifiques et priorité !important pour tout écraser */
html[data-theme="dark"] .learning-item-card svg,
html[data-theme="dark"] .item-wrapper svg,
html[data-theme="dark"] .card svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  opacity: 1 !important;
  visibility: visible !important;
  stroke-opacity: 1 !important;
}

/* Inline style intégré via attribut style pour maximiser la priorité */
html[data-theme="dark"] .learning-item-card svg {
  --svgfill: none !important;
  --svgstroke: currentColor !important;
}

/* Pour tous les types d'éléments SVG internes */
html[data-theme="dark"] .learning-item-card svg path,
html[data-theme="dark"] .learning-item-card svg line,
html[data-theme="dark"] .learning-item-card svg polyline,
html[data-theme="dark"] .learning-item-card svg rect,
html[data-theme="dark"] .learning-item-card svg circle,
html[data-theme="dark"] .learning-item-card svg polygon {
  fill: none !important;
  stroke: currentColor !important;
}

/* Ciblage par ID d'icône pour les icônes problématiques */
html[data-theme="dark"] .learning-item-card [data-lucide="Edit"],
html[data-theme="dark"] .learning-item-card [data-lucide="Trash2"],
html[data-theme="dark"] .learning-item-card [data-lucide="Clock"],
html[data-theme="dark"] .learning-item-card [data-lucide="Check"],
html[data-theme="dark"] .learning-item-card [data-lucide="X"],
html[data-theme="dark"] .learning-item-card [data-lucide="Play"],
html[data-theme="dark"] .learning-item-card [data-lucide="Pause"],
html[data-theme="dark"] .learning-item-card [data-lucide="Plus"],
html[data-theme="dark"] .learning-item-card [data-lucide="Link"],
html[data-theme="dark"] .learning-item-card [data-lucide="ExternalLink"],
html[data-theme="dark"] .learning-item-card [data-lucide="Download"],
html[data-theme="dark"] .learning-item-card [data-lucide="Eye"],
html[data-theme="dark"] .learning-item-card [data-lucide="EyeOff"],
html[data-theme="dark"] .learning-item-card [data-lucide="Bookmark"],
html[data-theme="dark"] .learning-item-card [data-lucide="BookmarkCheck"] {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
  vector-effect: non-scaling-stroke !important;
}

/* Override par nom de classe Lucide */
html[data-theme="dark"] .learning-item-card .lucide-edit,
html[data-theme="dark"] .learning-item-card .lucide-trash-2,
html[data-theme="dark"] .learning-item-card .lucide-clock,
html[data-theme="dark"] .learning-item-card .lucide-check,
html[data-theme="dark"] .learning-item-card .lucide-x,
html[data-theme="dark"] .learning-item-card .lucide-play,
html[data-theme="dark"] .learning-item-card .lucide-pause,
html[data-theme="dark"] .learning-item-card .lucide-plus,
html[data-theme="dark"] .learning-item-card .lucide-link,
html[data-theme="dark"] .learning-item-card .lucide-external-link,
html[data-theme="dark"] .learning-item-card .lucide-download,
html[data-theme="dark"] .learning-item-card .lucide-eye,
html[data-theme="dark"] .learning-item-card .lucide-eye-off,
html[data-theme="dark"] .learning-item-card .lucide-bookmark,
html[data-theme="dark"] .learning-item-card .lucide-bookmark-check {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
}

/* Icônes dans des boutons - sélecteur encore plus spécifique */
html[data-theme="dark"] .learning-item-card button svg,
html[data-theme="dark"] .item-wrapper button svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
}

/* Règles de couleur extrêmement spécifiques */
html[data-theme="dark"] .learning-item-card .text-red-500 svg,
html[data-theme="dark"] .learning-item-card .text-red-600 svg,
html[data-theme="dark"] .learning-item-card button.text-red-500 svg,
html[data-theme="dark"] .learning-item-card button.text-red-600 svg {
  fill: none !important;
  stroke: #ef4444 !important;
}

html[data-theme="dark"] .learning-item-card .text-blue-500 svg,
html[data-theme="dark"] .learning-item-card .text-blue-600 svg,
html[data-theme="dark"] .learning-item-card button.text-blue-500 svg,
html[data-theme="dark"] .learning-item-card button.text-blue-600 svg {
  fill: none !important;
  stroke: #3b82f6 !important;
}

html[data-theme="dark"] .learning-item-card .text-green-500 svg,
html[data-theme="dark"] .learning-item-card .text-green-600 svg,
html[data-theme="dark"] .learning-item-card button.text-green-500 svg,
html[data-theme="dark"] .learning-item-card button.text-green-600 svg {
  fill: none !important;
  stroke: #22c55e !important;
}

html[data-theme="dark"] .learning-item-card .text-yellow-500 svg,
html[data-theme="dark"] .learning-item-card .text-yellow-600 svg,
html[data-theme="dark"] .learning-item-card button.text-yellow-500 svg,
html[data-theme="dark"] .learning-item-card button.text-yellow-600 svg {
  fill: none !important;
  stroke: #facc15 !important;
}

/* Fixation de l'icône Trophy */
html[data-theme="dark"] .learning-item-card [data-lucide="Trophy"],
html[data-theme="dark"] .learning-item-card .lucide-trophy {
  stroke: #facc15 !important;
  stroke-width: 2.5px !important;
}

html[data-theme="dark"] .learning-item-card [data-lucide="Trophy"] path[fill="currentColor"],
html[data-theme="dark"] .learning-item-card .lucide-trophy path[fill="currentColor"] {
  fill: #facc15 !important;
}

/* Styles inline via attribut pour corriger les éléments via JS */
svg[data-emergency-fix="true"] {
  fill: none !important;
  stroke: currentColor !important;
}

/* Augmenter l'opacité et autres propriétés pour garantir la visibilité */
html[data-theme="dark"] .learning-item-card svg,
html[data-theme="dark"] .item-wrapper svg {
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-block !important;
  stroke-opacity: 1 !important;
}

/* Keyframes pour forcer le repaint des SVG */
@keyframes emergencyFix {
  0% { opacity: 0.99; }
  100% { opacity: 1; }
}

html[data-theme="dark"] .learning-item-card svg {
  animation: emergencyFix 0.01s forwards !important;
}

/* Fixing SVG child elements specifically */
html[data-theme="dark"] .learning-item-card svg * {
  fill: none !important;
  stroke: inherit !important;
}
