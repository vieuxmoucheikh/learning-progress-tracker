/**
 * CORRECTIFS POUR LES ICÔNES EN MODE SOMBRE SUR MOBILE
 * Ce fichier corrige l'affichage des icônes dans les cartes d'apprentissage 
 * lorsqu'elles sont visualisées en mode sombre sur mobile.
 */

/* Styles globaux pour toutes les icônes */
html[data-theme="dark"] svg, 
html[data-theme="dark"] svg path, 
html[data-theme="dark"] svg line, 
html[data-theme="dark"] svg polyline, 
html[data-theme="dark"] svg circle, 
html[data-theme="dark"] svg rect {
  stroke-width: inherit !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  fill: none !important; /* Empêche le remplissage des icônes */
  shape-rendering: geometricPrecision !important;
}

/* Styles spécifiques pour les icônes dans les cartes */
html[data-theme="dark"] .card svg,
html[data-theme="dark"] .learning-item-card svg,
html[data-theme="dark"] .item-wrapper svg {
  color: currentColor !important;
  stroke: currentColor !important;
  fill: none !important;
  stroke-width: 2 !important;
}

/* Corrections spécifiques pour chaque type d'icône couramment utilisée */
html[data-theme="dark"] .card svg[data-lucide="Edit"],
html[data-theme="dark"] .card svg[data-lucide="Save"],
html[data-theme="dark"] .card svg[data-lucide="Trash2"],
html[data-theme="dark"] .card svg[data-lucide="Clock"],
html[data-theme="dark"] .card svg[data-lucide="Check"],
html[data-theme="dark"] .card svg[data-lucide="X"],
html[data-theme="dark"] .card svg[data-lucide="Play"],
html[data-theme="dark"] .card svg[data-lucide="Pause"],
html[data-theme="dark"] .card svg[data-lucide="Plus"],
html[data-theme="dark"] .card svg[data-lucide="Link"],
html[data-theme="dark"] .card svg[data-lucide="ExternalLink"] {
  fill: none !important;
  stroke: currentColor !important;
}

/* Correctifs spécifiques pour les boutons contenant des icônes */
html[data-theme="dark"] .card button svg,
html[data-theme="dark"] .learning-item-card button svg,
html[data-theme="dark"] .item-wrapper button svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2 !important;
}

/* Correctifs pour les couleurs spécifiques */
html[data-theme="dark"] .card button.text-red-600 svg,
html[data-theme="dark"] .learning-item-card button.text-red-600 svg {
  stroke: #ef4444 !important;
  fill: none !important;
}

html[data-theme="dark"] .card button.text-green-600 svg,
html[data-theme="dark"] .learning-item-card button.text-green-600 svg {
  stroke: #22c55e !important;
  fill: none !important;
}

html[data-theme="dark"] .card button.text-blue-600 svg,
html[data-theme="dark"] .learning-item-card button.text-blue-600 svg {
  stroke: #3b82f6 !important;
  fill: none !important;
}

html[data-theme="dark"] .card button.text-yellow-600 svg,
html[data-theme="dark"] .learning-item-card button.text-yellow-600 svg {
  stroke: #facc15 !important;
  fill: none !important;
}

/* Correctifs spécifiques pour les icônes dans les éléments d'état/statut */
html[data-theme="dark"] .badge svg,
html[data-theme="dark"] .status-badge svg,
html[data-theme="dark"] [class*="status-"] svg {
  fill: none !important;
  stroke: currentColor !important;
}

/* Correction pour les icônes en mode mobile */
@media (max-width: 768px) {
  html[data-theme="dark"] .card svg,
  html[data-theme="dark"] .learning-item-card svg,
  html[data-theme="dark"] .item-wrapper svg {
    stroke-width: 2.5 !important; /* Légèrement plus épais pour meilleure visibilité sur mobile */
  }
}

/* Correctifs spécifiques pour certaines icônes qui doivent avoir du remplissage */
html[data-theme="dark"] svg[data-lucide="Trophy"] .fill-part,
html[data-theme="dark"] svg[data-lucide="Award"] .fill-part {
  fill: currentColor !important;
}

/* Couleurs préservées spécifiquement pour certaines icônes */
html[data-theme="dark"] svg.text-blue-500,
html[data-theme="dark"] svg.text-blue-400 {
  stroke: #3b82f6 !important;
  color: #3b82f6 !important;
}

html[data-theme="dark"] svg.text-green-500,
html[data-theme="dark"] svg.text-green-400 {
  stroke: #22c55e !important;
  color: #22c55e !important;
}

html[data-theme="dark"] svg.text-yellow-500,
html[data-theme="dark"] svg.text-yellow-400 {
  stroke: #facc15 !important;
  color: #facc15 !important;
}

html[data-theme="dark"] svg.text-red-500,
html[data-theme="dark"] svg.text-red-400 {
  stroke: #ef4444 !important;
  color: #ef4444 !important;
}

/* Assurer que les icônes dans le badge de statut sont visibles */
.badge svg {
  stroke-width: 2.5 !important;
  height: 0.875rem !important;
  width: 0.875rem !important;
  margin-right: 0.25rem !important;
}

/* CIBLAGE SPÉCIFIQUE POUR LE DASHBOARD ET ALL ITEMS */
html[data-theme="dark"] [id*="dashboard"] .card,
html[data-theme="dark"] [class*="dashboard"] .card,
html[data-theme="dark"] [id*="dashboard"] .rounded-xl,
html[data-theme="dark"] [class*="dashboard"] .rounded-xl,
html[data-theme="dark"] [id*="items"] .card,
html[data-theme="dark"] [class*="items"] .card,
html[data-theme="dark"] [id*="items"] .rounded-xl,
html[data-theme="dark"] [class*="items"] .rounded-xl {
  background-color: #1e293b !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 0.75rem !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25) !important;
  overflow: hidden !important;
}

/* CORRECTIFS POUR LES ÉLÉMENTS À L'INTÉRIEUR DES CARTES */
html[data-theme="dark"] [id*="dashboard"] .card h3,
html[data-theme="dark"] [class*="dashboard"] .card h3,
html[data-theme="dark"] [id*="items"] .card h3,
html[data-theme="dark"] [class*="items"] .card h3,
html[data-theme="dark"] [id*="dashboard"] .card [class*="title"],
html[data-theme="dark"] [class*="dashboard"] .card [class*="title"],
html[data-theme="dark"] [id*="items"] .card [class*="title"],
html[data-theme="dark"] [class*="items"] .card [class*="title"] {
  color: #ffffff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
}

/* TEXTES DANS LES CARTES */
html[data-theme="dark"] [id*="dashboard"] .card p,
html[data-theme="dark"] [class*="dashboard"] .card p,
html[data-theme="dark"] [id*="items"] .card p,
html[data-theme="dark"] [class*="items"] .card p,
html[data-theme="dark"] [id*="dashboard"] .card span:not([class*="icon"]),
html[data-theme="dark"] [class*="dashboard"] .card span:not([class*="icon"]),
html[data-theme="dark"] [id*="items"] .card span:not([class*="icon"]),
html[data-theme="dark"] [class*="items"] .card span:not([class*="icon"]) {
  color: #f1f5f9 !important;
}

/* CIBLAGE DES ICÔNES DANS LE DASHBOARD ET ALL ITEMS */
html[data-theme="dark"] [id*="dashboard"] svg,
html[data-theme="dark"] [class*="dashboard"] svg,
html[data-theme="dark"] [id*="items"] svg,
html[data-theme="dark"] [class*="items"] svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
}

/* MODE MOBILE - PRIORITÉ MAXIMALE */
@media (max-width: 768px) {
  /* Cartes du Dashboard et All Items sur mobile */
  html[data-theme="dark"] [id*="dashboard"] .card,
  html[data-theme="dark"] [class*="dashboard"] .card,
  html[data-theme="dark"] [id*="items"] .card,
  html[data-theme="dark"] [class*="items"] .card,
  html[data-theme="dark"] [id*="dashboard"] .rounded-xl,
  html[data-theme="dark"] [class*="dashboard"] .rounded-xl,
  html[data-theme="dark"] [id*="items"] .rounded-xl,
  html[data-theme="dark"] [class*="items"] .rounded-xl,
  html[data-theme="dark"] [id*="dashboard"] [class*="learning-item-card"],
  html[data-theme="dark"] [class*="dashboard"] [class*="learning-item-card"],
  html[data-theme="dark"] [id*="items"] [class*="learning-item-card"],
  html[data-theme="dark"] [class*="items"] [class*="learning-item-card"] {
    background-color: #1e293b !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    border-radius: 0.75rem !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3) !important;
  }
  
  /* Titres sur mobile - Plus grands et plus visibles */
  html[data-theme="dark"] [id*="dashboard"] .card h3,
  html[data-theme="dark"] [class*="dashboard"] .card h3,
  html[data-theme="dark"] [id*="items"] .card h3,
  html[data-theme="dark"] [class*="items"] .card h3,
  html[data-theme="dark"] [id*="dashboard"] .card [class*="title"],
  html[data-theme="dark"] [class*="dashboard"] .card [class*="title"],
  html[data-theme="dark"] [id*="items"] .card [class*="title"],
  html[data-theme="dark"] [class*="items"] .card [class*="title"] {
    color: #ffffff !important;
    font-weight: 700 !important;
    font-size: 1.25rem !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4) !important;
  }
  
  /* Icônes sur mobile - Trait plus épais pour meilleure visibilité */
  html[data-theme="dark"] [id*="dashboard"] svg,
  html[data-theme="dark"] [class*="dashboard"] svg,
  html[data-theme="dark"] [id*="items"] svg,
  html[data-theme="dark"] [class*="items"] svg {
    stroke-width: 2.5px !important;
    fill: none !important;
  }
  
  /* Correction spécifique pour les icônes Lucide */
  html[data-theme="dark"] [id*="dashboard"] [class*="lucide-"],
  html[data-theme="dark"] [class*="dashboard"] [class*="lucide-"],
  html[data-theme="dark"] [id*="items"] [class*="lucide-"],
  html[data-theme="dark"] [class*="items"] [class*="lucide-"] {
    fill: none !important;
    stroke: currentColor !important;
    stroke-width: 2.5px !important;
    stroke-linecap: round !important;
    stroke-linejoin: round !important;
  }
  
  /* Correction spécifique pour l'icône Play qui a besoin de remplissage */
  html[data-theme="dark"] [id*="dashboard"] .lucide-play,
  html[data-theme="dark"] [class*="dashboard"] .lucide-play,
  html[data-theme="dark"] [id*="items"] .lucide-play,
  html[data-theme="dark"] [class*="items"] .lucide-play {
    fill: currentColor !important;
    stroke: currentColor !important;
  }
}

/* CIBLAGE ULTRA-SPÉCIFIQUE POUR LES CARTES DU DASHBOARD */
html[data-theme="dark"] div[id*="dashboard"] div.grid div.rounded-xl,
html[data-theme="dark"] div[class*="dashboard"] div.grid div.rounded-xl {
  background-color: #1e293b !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 0.75rem !important;
  overflow: hidden !important;
}

/* FORÇAGE DES STYLES D'ICÔNES DANS LES BOUTONS ET BADGES */
html[data-theme="dark"] button svg,
html[data-theme="dark"] [role="button"] svg,
html[data-theme="dark"] .badge svg,
html[data-theme="dark"] [class*="badge"] svg {
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
}

/* CORRECTIFS POUR LES ICÔNES */

/* Force la visibilité de toutes les icônes SVG */
svg {
  display: inline-block !important;
  vertical-align: middle !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Correctifs pour les icônes Lucide */
.lucide,
.lucide-icon,
[data-lucide] {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  vertical-align: middle !important;
  overflow: visible !important;
}

/* Icônes dans les boutons - mode clair */
html[data-theme="light"] button svg,
html[data-theme="light"] a svg {
  color: #475569 !important; /* slate-600 */
}

/* Icônes dans les boutons - mode sombre */
html[data-theme="dark"] button svg,
html[data-theme="dark"] a svg {
  color: #e2e8f0 !important; /* slate-200 */
}

/* Icônes spécifiques par couleur - mode clair */
html[data-theme="light"] button.text-blue-600 svg {
  color: #2563eb !important; /* blue-600 */
}

html[data-theme="light"] button.text-emerald-600 svg {
  color: #059669 !important; /* emerald-600 */
}

html[data-theme="light"] button.text-red-600 svg {
  color: #dc2626 !important; /* red-600 */
}

/* Icônes spécifiques par couleur - mode sombre */
html[data-theme="dark"] button.text-blue-400 svg,
html[data-theme="dark"] button.dark\:text-blue-400 svg {
  color: #60a5fa !important; /* blue-400 */
}

html[data-theme="dark"] button.text-emerald-400 svg,
html[data-theme="dark"] button.dark\:text-emerald-400 svg {
  color: #34d399 !important; /* emerald-400 */
}

html[data-theme="dark"] button.text-red-400 svg,
html[data-theme="dark"] button.dark\:text-red-400 svg {
  color: #f87171 !important; /* red-400 */
}

/* Ombres pour améliorer la visibilité des icônes */
html[data-theme="dark"] svg {
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3)) !important;
}

/* Augmentation de la taille sur mobile */
@media (max-width: 640px) {
  .w-4.h-4, 
  .h-4.w-4 {
    width: 18px !important;
    height: 18px !important;
  }
  
  .w-5.h-5, 
  .h-5.w-5 {
    width: 20px !important;
    height: 20px !important;
  }
}

/* Icônes spécifiques pour l'éditeur de texte */
html .rich-text-editor button svg,
html .rich-content-editor button svg,
html [class*="editor"] button svg {
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* CORRECTIFS POUR LES ICÔNES DE L'ÉDITEUR DE TEXTE RICHE */

/* Assurer que toutes les icônes de l'éditeur sont correctement visibles */
.rich-text-editor button svg,
.rich-content-editor button svg,
[class*="editor"] button svg {
  color: #334155 !important; /* Couleur par défaut pour toutes les icônes en mode clair */
  fill: none !important;
  stroke: currentColor !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Mode sombre - Couleur des icônes dans l'éditeur */
html[data-theme="dark"] .rich-text-editor button svg,
html[data-theme="dark"] .rich-content-editor button svg,
html[data-theme="dark"] [class*="editor"] button svg {
  color: #e2e8f0 !important; /* Couleur plus claire pour le mode sombre */
  fill: none !important;
  stroke: currentColor !important;
}

/* Correction pour les boutons actifs dans l'éditeur */
.rich-text-editor button[class*="bg-gray-100"] svg,
.rich-content-editor button[class*="bg-gray-100"] svg,
[class*="editor"] button[class*="bg-gray-100"] svg {
  color: #1d4ed8 !important; /* Bleu plus prononcé pour les boutons actifs */
}

html[data-theme="dark"] .rich-text-editor button[class*="bg-gray-100"] svg,
html[data-theme="dark"] .rich-content-editor button[class*="bg-gray-100"] svg,
html[data-theme="dark"] [class*="editor"] button[class*="bg-gray-100"] svg {
  color: #93c5fd !important; /* Bleu clair pour les boutons actifs en mode sombre */
}

/* Correction spécifique pour les icônes de couleur et de palette */
.rich-text-editor button:has(.lucide-type) svg,
.rich-content-editor button:has(.lucide-type) svg,
[class*="editor"] button:has(.lucide-type) svg,
.rich-text-editor button:has(.lucide-palette) svg,
.rich-content-editor button:has(.lucide-palette) svg,
[class*="editor"] button:has(.lucide-palette) svg {
  color: #334155 !important;
  fill: none !important;
  stroke: currentColor !important;
}

html[data-theme="dark"] .rich-text-editor button:has(.lucide-type) svg,
html[data-theme="dark"] .rich-content-editor button:has(.lucide-type) svg,
html[data-theme="dark"] [class*="editor"] button:has(.lucide-type) svg,
html[data-theme="dark"] .rich-text-editor button:has(.lucide-palette) svg,
html[data-theme="dark"] .rich-content-editor button:has(.lucide-palette) svg,
html[data-theme="dark"] [class*="editor"] button:has(.lucide-palette) svg {
  color: #e2e8f0 !important;
  fill: none !important;
  stroke: currentColor !important;
}

/* Amélioration du hover pour les boutons de l'éditeur */
.rich-text-editor button:hover svg,
.rich-content-editor button:hover svg,
[class*="editor"] button:hover svg {
  color: #2563eb !important; /* Bleu sur hover en mode clair */
}

html[data-theme="dark"] .rich-text-editor button:hover svg,
html[data-theme="dark"] .rich-content-editor button:hover svg,
html[data-theme="dark"] [class*="editor"] button:hover svg {
  color: #60a5fa !important; /* Bleu clair sur hover en mode sombre */
}
