/**
 * CORRECTIFS DE DERNIER RECOURS POUR ICÔNES SPÉCIFIQUES
 * Ce fichier applique des styles très ciblés pour forcer la visibilité des icônes
 * problématiques comme edit, complete, delete, start, end, book et notes.
 */

/* FORCER LE RENDU DES ICÔNES COURAMMENT PROBLÉMATIQUES */
/* Utilise des sélecteurs extrêmement spécifiques avec !important pour dominer tous les autres styles */

/* 1. ICÔNE D'ÉDITION (EDIT) */
[data-lucide="Edit"],
button svg[data-lucide="Edit"],
.card svg[data-lucide="Edit"],
.learning-item-card svg[data-lucide="Edit"],
.item-wrapper svg[data-lucide="Edit"],
html[data-theme="dark"] button svg[data-lucide="Edit"],
html[data-theme="dark"] .card svg[data-lucide="Edit"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="Edit"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Edit"] {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.25px !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  width: 1em !important;
  height: 1em !important;
  display: inline-block !important;
}

/* 2. ICÔNE DE COMPLÉTION (CHECK) */
[data-lucide="Check"],
button svg[data-lucide="Check"],
.card svg[data-lucide="Check"],
.learning-item-card svg[data-lucide="Check"],
.item-wrapper svg[data-lucide="Check"],
html[data-theme="dark"] button svg[data-lucide="Check"],
html[data-theme="dark"] .card svg[data-lucide="Check"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="Check"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Check"] {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.25px !important;
  color: #22c55e !important;
  stroke: #22c55e !important;
  width: 1em !important;
  height: 1em !important;
  display: inline-block !important;
}

/* 3. ICÔNE DE SUPPRESSION (TRASH2, X) */
[data-lucide="Trash2"],
button svg[data-lucide="Trash2"],
.card svg[data-lucide="Trash2"],
.learning-item-card svg[data-lucide="Trash2"],
.item-wrapper svg[data-lucide="Trash2"],
html[data-theme="dark"] button svg[data-lucide="Trash2"],
html[data-theme="dark"] .card svg[data-lucide="Trash2"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="Trash2"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Trash2"],
[data-lucide="X"],
button svg[data-lucide="X"],
.card svg[data-lucide="X"],
.learning-item-card svg[data-lucide="X"],
.item-wrapper svg[data-lucide="X"],
html[data-theme="dark"] button svg[data-lucide="X"],
html[data-theme="dark"] .card svg[data-lucide="X"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="X"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="X"] {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.25px !important;
  color: #ef4444 !important;
  stroke: #ef4444 !important;
  width: 1em !important;
  height: 1em !important;
  display: inline-block !important;
}

/* 4. ICÔNES DE DÉMARRAGE/ARRÊT (PLAY, PAUSE) */
[data-lucide="Play"],
button svg[data-lucide="Play"],
.card svg[data-lucide="Play"],
.learning-item-card svg[data-lucide="Play"],
.item-wrapper svg[data-lucide="Play"],
html[data-theme="dark"] button svg[data-lucide="Play"],
html[data-theme="dark"] .card svg[data-lucide="Play"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="Play"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Play"] {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.25px !important;
  color: #3b82f6 !important;
  stroke: #3b82f6 !important;
  width: 1em !important;
  height: 1em !important;
  display: inline-block !important;
}

[data-lucide="Pause"],
button svg[data-lucide="Pause"],
.card svg[data-lucide="Pause"],
.learning-item-card svg[data-lucide="Pause"],
.item-wrapper svg[data-lucide="Pause"],
html[data-theme="dark"] button svg[data-lucide="Pause"],
html[data-theme="dark"] .card svg[data-lucide="Pause"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="Pause"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="Pause"] {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.25px !important;
  color: #facc15 !important;
  stroke: #facc15 !important;
  width: 1em !important;
  height: 1em !important;
  display: inline-block !important;
}

/* 5. ICÔNE DE LIVRE (BOOKOPEN) */
[data-lucide="BookOpen"],
button svg[data-lucide="BookOpen"],
.card svg[data-lucide="BookOpen"],
.learning-item-card svg[data-lucide="BookOpen"],
.item-wrapper svg[data-lucide="BookOpen"],
html[data-theme="dark"] button svg[data-lucide="BookOpen"],
html[data-theme="dark"] .card svg[data-lucide="BookOpen"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="BookOpen"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="BookOpen"] {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.25px !important;
  width: 1em !important;
  height: 1em !important;
  display: inline-block !important;
}

/* 6. ICÔNES DE NOTES (FILE, FILEEDIT) */
[data-lucide="File"],
[data-lucide="FileEdit"],
button svg[data-lucide="File"],
button svg[data-lucide="FileEdit"],
.card svg[data-lucide="File"],
.card svg[data-lucide="FileEdit"],
.learning-item-card svg[data-lucide="File"],
.learning-item-card svg[data-lucide="FileEdit"],
.item-wrapper svg[data-lucide="File"],
.item-wrapper svg[data-lucide="FileEdit"],
html[data-theme="dark"] button svg[data-lucide="File"],
html[data-theme="dark"] button svg[data-lucide="FileEdit"],
html[data-theme="dark"] .card svg[data-lucide="File"],
html[data-theme="dark"] .card svg[data-lucide="FileEdit"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="File"],
html[data-theme="dark"] .learning-item-card svg[data-lucide="FileEdit"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="File"],
html[data-theme="dark"] .item-wrapper svg[data-lucide="FileEdit"] {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.25px !important;
  width: 1em !important;
  height: 1em !important;
  display: inline-block !important;
}

/* Version spécifique au mode sombre sur mobile */
@media (max-width: 768px) {
  html[data-theme="dark"] [data-lucide="Edit"],
  html[data-theme="dark"] [data-lucide="Check"],
  html[data-theme="dark"] [data-lucide="Trash2"],
  html[data-theme="dark"] [data-lucide="X"],
  html[data-theme="dark"] [data-lucide="Play"],
  html[data-theme="dark"] [data-lucide="Pause"],
  html[data-theme="dark"] [data-lucide="BookOpen"],
  html[data-theme="dark"] [data-lucide="File"],
  html[data-theme="dark"] [data-lucide="FileEdit"] {
    stroke-width: 3px !important;
    /* Truc pour forcer un nouveau contexte de rendu */
    transform: translateZ(0) !important;
    filter: drop-shadow(0 0 1px rgba(255, 255, 255, 0.3)) !important;
  }
  
  /* Assurer que le remplissage est définitivement transparent */
  html[data-theme="dark"] [data-lucide] path,
  html[data-theme="dark"] [data-lucide] line,
  html[data-theme="dark"] [data-lucide] polyline,
  html[data-theme="dark"] [data-lucide] rect,
  html[data-theme="dark"] [data-lucide] circle {
    fill: transparent !important;
    stroke: currentColor !important;
  }
  
  /* Sélecteurs ultra-ciblés pour les boutons dans LearningItemCard */
  html[data-theme="dark"] .learning-item-card button svg,
  html[data-theme="dark"] .item-wrapper button svg {
    stroke-width: 3px !important;
    stroke: currentColor !important;
    fill: transparent !important;
  }
  
  /* Pour les boutons de session avec icônes */
  html[data-theme="dark"] button.icon-button svg,
  html[data-theme="dark"] button.start-button svg,
  html[data-theme="dark"] button.stop-button svg,
  html[data-theme="dark"] button.pause-button svg,
  html[data-theme="dark"] button.resume-button svg {
    stroke-width: 3px !important;
    fill: transparent !important;
    /* Force override */
    -webkit-appearance: none !important;
    transform: translateZ(0) !important;
  }
}

/* CSS HACK pour forcer les navigateurs à régénérer le rendu des SVG */
@keyframes force-redraw-animation {
  0% { opacity: 0.99999; }
  100% { opacity: 1; }
}

[data-lucide] {
  animation: force-redraw-animation 0.001s forwards !important;
}

/* REMPLACEMENTS POUR LES ICÔNES PROBLÉMATIQUES EN MODE SOMBRE SUR MOBILE */
@media (max-width: 768px) {
  html[data-theme="dark"] button.icon-button svg,
  html[data-theme="dark"] button.start-button svg,
  html[data-theme="dark"] button.stop-button svg,
  html[data-theme="dark"] button.pause-button svg,
  html[data-theme="dark"] button.resume-button svg {
    /* Créer un pseudo-élément SVG visible */
    position: relative !important;
  }
  
  /* Contour blanc autour des icônes pour meilleure visibilité */
  html[data-theme="dark"] button svg[data-lucide],
  html[data-theme="dark"] .card svg[data-lucide],
  html[data-theme="dark"] .learning-item-card svg[data-lucide] {
    filter: drop-shadow(0 0 1px rgba(255, 255, 255, 0.5)) !important;
  }
}

/* Force une forme visuelle pour les icônes spécifiques si elles ne s'affichent toujours pas */
html[data-theme="dark"] [data-lucide="Play"]::before {
  content: "▶" !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  font-size: 1em !important;
  color: #3b82f6 !important;
  z-index: 2 !important;
}

html[data-theme="dark"] [data-lucide="Pause"]::before {
  content: "⏸" !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  font-size: 1em !important;
  color: #facc15 !important;
  z-index: 2 !important;
}

html[data-theme="dark"] [data-lucide="X"]::before {
  content: "✕" !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  font-size: 1em !important;
  color: #ef4444 !important;
  z-index: 2 !important;
}

/* Désactiver l'opacité qui pourrait empêcher la visibilité */
html[data-theme="dark"] svg,
html[data-theme="dark"] [data-lucide] {
  opacity: 1 !important;
}

/* CLASSES CIBLÉES POUR LES BOUTONS DE CONTRÔLE DE SESSION */
.icon-button svg,
.start-button svg,
.pause-button svg,
.resume-button svg,
.stop-button svg {
  fill: transparent !important;
  stroke: currentColor !important;
  stroke-width: 2.5px !important;
}
