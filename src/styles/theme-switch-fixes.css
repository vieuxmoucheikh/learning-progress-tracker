/**
 * Additional fixes for theme switching
 * This file contains specific fixes to prevent layout shifts and ensure smooth transitions
 */

/* Ensure content dimensions don't change during theme transitions */
.theme-transitioning .card,
.theme-transitioning [class*="card"],
.theme-transitioning .learning-item-card {
  contain: layout style;
  content-visibility: auto;
}

/* Prevent text size/weight changes from causing layout shifts */
.theme-transitioning h1,
.theme-transitioning h2,
.theme-transitioning h3,
.theme-transitioning h4,
.theme-transitioning h5,
.theme-transitioning h6,
.theme-transitioning p,
.theme-transitioning span,
.theme-transitioning a {
  contain: layout style;
}

/* Ensure badges maintain their dimensions */
.theme-transitioning .badge,
.theme-transitioning [class*="badge"] {
  contain: layout style;
}

/* Prevent button size changes */
.theme-transitioning button,
.theme-transitioning [role="button"] {
  contain: layout style;
}

/* Ensure form elements maintain dimensions */
.theme-transitioning input,
.theme-transitioning textarea,
.theme-transitioning select {
  contain: layout style;
}

/* Fix for mobile specific issues */
@media (max-width: 768px) {
  /* Force immediate application of styles without animation */
  .theme-transitioning * {
    animation-duration: 0s !important;
    transition-duration: 0s !important;
  }
  
  /* Ensure mobile cards maintain their dimensions */
  html[data-theme="light"] .card,
  html[data-theme="dark"] .card,
  html[data-theme="light"] [class*="card"],
  html[data-theme="dark"] [class*="card"] {
    min-height: var(--card-min-height, auto);
    min-width: var(--card-min-width, auto);
    max-height: var(--card-max-height, none);
    max-width: var(--card-max-width, none);
  }
  
  /* Force hardware acceleration for smoother transitions */
  .card,
  [class*="card"],
  .badge,
  button,
  [role="button"],
  input,
  textarea,
  select {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
}

/* Fix for theme toggle button */
.theme-toggle-button {
  position: relative;
  overflow: hidden;
  width: 5.5rem !important; /* Force consistent width */
  height: 2rem !important; /* Force consistent height */
}

/* Ensure theme toggle maintains its size during transitions */
.theme-transitioning .theme-toggle-button {
  width: 5.5rem !important;
  height: 2rem !important;
  contain: strict;
}

/* Prevent content flicker during theme change */
.theme-transitioning {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
